<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ExGPT - –ë–µ—Å–ø–ª–∞—Ç–Ω—ã–π —á–∞—Ç</title>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>
    <style>
        body { background: #0f0f0f; color: #e0e0e0; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; display: flex; flex-direction: column; height: 100vh; margin: 0; }
        .header { background: #1a1a1a; padding: 15px; text-align: center; border-bottom: 1px solid #333; }
        .header h1 { margin: 0; font-size: 1.2rem; color: #00ff88; }
        .header p { margin: 5px 0 0; font-size: 0.8rem; color: #888; }
        #chat-box { flex: 1; overflow-y: auto; padding: 20px; display: flex; flex-direction: column; gap: 10px; }
        .msg { max-width: 80%; padding: 10px 15px; border-radius: 15px; font-size: 0.95rem; line-height: 1.4; }
        .user-msg { background: #005bb5; align-self: flex-end; border-bottom-right-radius: 2px; }
        .admin-msg { background: #333; align-self: flex-start; border-bottom-left-radius: 2px; border: 1px solid #444; }
        .msg img { max-width: 100%; border-radius: 10px; margin-top: 5px; display: block; }
        .input-area { background: #1a1a1a; padding: 15px; display: flex; gap: 10px; border-top: 1px solid #333; }
        input { flex: 1; background: #2a2a2a; border: none; padding: 12px; border-radius: 25px; color: white; outline: none; }
        button { background: #00ff88; border: none; padding: 0 20px; border-radius: 25px; color: #000; font-weight: bold; cursor: pointer; transition: 0.2s; }
        button:hover { background: #00cc6e; transform: scale(1.05); }
        .attach-btn { background: #444; color: #fff; font-size: 1.2rem; padding: 0 15px; }
    </style>
</head>
<body>

<div class="header">
    <h1>ExGPT</h1>
    <p>–ê–±—Å–æ–ª—é—Ç–Ω–æ –±–µ—Å–ø–ª–∞—Ç–Ω—ã–π –Ω–µ–π—Ä–æ—Å–µ—Ç–µ–≤–æ–π —á–∞—Ç</p>
</div>

<div id="chat-box"></div>

<div class="input-area">
    <button class="attach-btn" onclick="sendPhoto()">üìé</button>
    <input type="text" id="messageInput" placeholder="–í–≤–µ–¥–∏—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –∏–ª–∏ —Å—Å—ã–ª–∫—É –Ω–∞ —Ñ–æ—Ç–æ...">
    <button onclick="sendMessage()">–û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>
</div>

<script>
    // –¢–í–û–ò –î–ê–ù–ù–´–ï –ò–ó FIREBASE (–°–ö–û–ü–ò–†–£–ô –ò–ó –ü–†–û–®–õ–û–ì–û –ö–û–î–ê –ò–õ–ò –ö–û–ù–°–û–õ–ò)
    const firebaseConfig = {
        databaseURL: "https://exgpt-777-default-rtdb.europe-west1.firebasedatabase.app/" 
    };
    firebase.initializeApp(firebaseConfig);
    const db = firebase.database();

    const chatBox = document.getElementById('chat-box');
    const messageInput = document.getElementById('messageInput');

    // –§—É–Ω–∫—Ü–∏—è –ø—Ä–æ–≤–µ—Ä–∫–∏, —è–≤–ª—è–µ—Ç—Å—è –ª–∏ —Ç–µ–∫—Å—Ç —Å—Å—ã–ª–∫–æ–π –Ω–∞ –∫–∞—Ä—Ç–∏–Ω–∫—É
    function isImgUrl(url) {
        return /\.(jpg|jpeg|png|webp|avif|gif)$/.test(url);
    }

    function sendMessage() {
        const text = messageInput.value.trim();
        if (text === "") return;

        db.ref('messages').push({
            user: "User",
            text: text,
            timestamp: Date.now()
        });
        messageInput.value = "";
    }

    function sendPhoto() {
        const url = prompt("–í—Å—Ç–∞–≤—å—Ç–µ –ø—Ä—è–º—É—é —Å—Å—ã–ª–∫—É –Ω–∞ —Ñ–æ—Ç–æ (–∑–∞–∫–∞–Ω—á–∏–≤–∞–µ—Ç—Å—è –Ω–∞ .jpg, .png –∏ —Ç.–¥.):");
        if (url && isImgUrl(url)) {
            db.ref('messages').push({
                user: "User",
                text: url,
                timestamp: Date.now()
            });
        } else if (url) {
            alert("–≠—Ç–æ –Ω–µ –ø–æ—Ö–æ–∂–µ –Ω–∞ –ø—Ä—è–º—É—é —Å—Å—ã–ª–∫—É –Ω–∞ –∫–∞—Ä—Ç–∏–Ω–∫—É!");
        }
    }

    db.ref('messages').on('child_added', (snapshot) => {
        const msg = snapshot.val();
        const div = document.createElement('div');
        div.className = `msg ${msg.user === 'Admin' ? 'admin-msg' : 'user-msg'}`;
        
        if (isImgUrl(msg.text)) {
            div.innerHTML = `<img src="${msg.text}" alt="–ü—Ä–∏—Å–ª–∞–Ω–Ω–æ–µ —Ñ–æ—Ç–æ">`;
        } else {
            div.textContent = msg.text;
        }
        
        chatBox.appendChild(div);
        chatBox.scrollTop = chatBox.scrollHeight;
    });

    messageInput.addEventListener("keypress", (e) => {
        if (e.key === "Enter") sendMessage();
    });
</script>

</body>
</html>
